'use strict';
var http = require('http');
var fs = require('fs');
var data = localStorage.getItem("CSIDEStorage");
try {
	var dirTree = JSON.parse(data);
}
catch(e) {
	dirTree = {
		items: [
			{
				name: "test",
				isFolder: true
				items: [
					{
						name: "test2",
						isFolder: true
						items: [
							{
								name: "test3",
								isFolder: true
								items: [

								]
							}
						]
					}
				]
			}
		],
	};
}

function getPath(path) {
	
}

var CSIDEStorage = {
	readDir: function(path, callback) {
		var dirs = ["test", "test2", "test3"]; //...path
		//
		var tree = dirTree;
		var failed = true;
		for (var d = 0; d < dirs.length; d++) {
			dir = dirs[d];
			for (var i = 0; i < tree.items.length; i++) {
				if (dir === tree.items[i].name && tree.items[i].isFolder) {
					tree = tree.items[i];
					console.log("found... " + dir);
				}
				else if (i === (tree.items.length - 1)) {
					//failed to find dir
					console.log("failed");
					return; //callback
				}
			}
		}
		console.log(tree.items);
	}
}

module.exports =  {
	
}
